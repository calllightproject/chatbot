<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Staff Portal</title>
  <style>
    :root {
      --core-blue:#00205b; --accent:#007eb4; --bg:#f5f7fb; --white:#fff; --text:#303235; --border:#e5e7eb;
    }
    body { margin:0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif; background:var(--bg); color:var(--text); }
    .wrap { max-width: 520px; margin: 48px auto; background: var(--white); border:1px solid var(--border); border-radius: 12px; box-shadow: 0 10px 24px rgba(0,0,0,.06); }
    .head { padding: 20px 22px; border-bottom: 1px solid var(--border); }
    h1 { margin:0; color: var(--core-blue); font-size: 1.4rem; }
    .body { padding: 22px; }
    .row { display:flex; gap:12px; margin-bottom: 14px; align-items: center; }
    label { width: 120px; font-weight: 600; color:#0f172a; }
    input[type="password"], select, input[type="text"] {
      flex: 1; padding: 10px 12px; border: 1px solid var(--border); border-radius: 10px; font-size: 1rem; background:#fff;
    }
    .hint { font-size:.9rem; color:#64748b; margin: 6px 0 14px 0; }
    .actions { display:flex; gap:10px; justify-content: flex-end; padding: 0 22px 22px; }
    .btn { border:1px solid var(--core-blue); background: var(--core-blue); color:#fff; padding:10px 14px; border-radius: 10px; cursor:pointer; }
    .btn:hover { background:#093582; }
    .flash { margin: 14px 22px 0; padding:10px 12px; border-radius:10px; background:#fef3c7; color:#7c2d12; border:1px solid #fde68a; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="head">
      <h1>Staff Portal</h1>
    </div>

    {% set has_flash = false %}
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        {% set has_flash = true %}
        <div class="flash">
          {% for m in messages %}<div>{{ m }}</div>{% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('staff_portal') }}">
      <div class="body">
        {% if pin_required %}
          <div class="row">
            <label for="pin">PIN</label>
            <input type="password" id="pin" name="pin" placeholder="Enter PIN" autocomplete="current-password" required>
          </div>
          <div class="hint">A valid PIN is required to proceed.</div>
        {% endif %}

        <div class="row">
          <label for="staff_name">Nurse</label>
          <select id="staff_name" name="staff_name" required>
            <option value="">Select your name…</option>
            {% for n in nurse_names %}
              <option value="{{ n }}" {% if prior_name and prior_name == n %}selected{% endif %}>{{ n }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="hint">You’ll be taken to your dashboard. You can switch between Day/Night and My Rooms/All once inside.</div>
      </div>

      <div class="actions">
        <button class="btn" type="submit">Go to my dashboard</button>
      </div>
    </form>
  </div>
</body>
</html>
